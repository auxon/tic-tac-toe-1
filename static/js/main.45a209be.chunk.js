(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{101:function(t,e){},175:function(t,e){},194:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return b}));var r=n(2),a=n.n(r),s=n(7),c=n(18),i=n(28),u=n(48),o=n(47),l=n(46),p=n(4),f=n(23),b=function(e){Object(u.a)(r,e);var n=Object(o.a)(r);function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.a.Testnet;return Object(c.a)(this,r),(t=n.call(this,e)).sensilet=void 0,"undefined"!==typeof window.sensilet?(console.log(r.DEBUG_TAG,"Sensilet is installed!"),t.sensilet=window.sensilet):console.warn(r.DEBUG_TAG,"sensilet is not installed"),t}return Object(i.a)(r,[{key:"requestAccount",value:function(t,e){if(!this.sensilet){if("undefined"!==typeof window.sensilet)return console.log(r.DEBUG_TAG,"Sensilet is installed!"),this.sensilet=window.sensilet,this.sensilet.requestAccount();alert("sensilet is not installed"),window.open("https://sensilet.com/","_blank")}return this.sensilet.requestAccount()}},{key:"isConnected",value:function(){var t=Object(s.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,console.log(r.DEBUG_TAG,"isConnect"),"undefined"===typeof this.sensilet){t.next=8;break}return t.next=5,this.sensilet.isConnect();case 5:return e=t.sent,console.log(r.DEBUG_TAG,"connect state",e),t.abrupt("return",e);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error("isConnected error",t.t0);case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"getbalance",value:function(){var t=Object(s.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.sensilet.getBsvBalance();case 3:return e=t.sent,console.log(r.DEBUG_TAG,"getbalance",e.balance),t.abrupt("return",Promise.resolve(e.balance.total));case 8:t.prev=8,t.t0=t.catch(0),console.error("getbalance error",t.t0);case 11:return t.abrupt("return",Promise.resolve(0));case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"signRawTransaction",value:function(){var e=Object(s.a)(a.a.mark((function e(n,r,s,c,i){var u,o,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=new p.bsv.Transaction(n),e.next=3,this.sensilet.signTx({list:[{txHex:n,address:h(r,this.network),scriptHex:r,inputIndex:c,satoshis:s,sigtype:i}]});case 3:return o=e.sent,l=(new p.bsv.Script).add(t.from(o.sigList[0].sig,"hex")).add(t.from(o.sigList[0].publicKey,"hex")),u.inputs[c].setScript(l),e.abrupt("return",u.toString());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,s){return e.apply(this,arguments)}}()},{key:"getSignature",value:function(){var t=Object(s.a)(a.a.mark((function t(e,n,r,s,c,i){var u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sensilet.signTx({list:[{txHex:e,address:i,inputIndex:s,satoshis:r,scriptHex:n,sigtype:c}]});case 2:return u=t.sent,t.abrupt("return",{signature:u.sigList[0].sig,publickey:u.sigList[0].publickey});case 4:case"end":return t.stop()}}),t,this)})));return function(e,n,r,a,s,c){return t.apply(this,arguments)}}()},{key:"sendRawTransaction",value:function(){var t=Object(s.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f.b.sendRawTransaction(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"listUnspent",value:function(){var t=Object(s.a)(a.a.mark((function t(e,n){var s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sensilet.getAddress();case 2:return s=t.sent,console.log(r.DEBUG_TAG,"listUnspent",s),t.abrupt("return",f.b.listUnspent(s).then((function(t){return t.data.filter((function(t){return t.value>=e})).map((function(t){return{txId:t.tx_hash,outputIndex:t.tx_pos,satoshis:t.value,script:p.bsv.Script.buildPublicKeyHashOut(s).toHex()}}))})));case 5:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getRawChangeAddress",value:function(){var t=Object(s.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.sensilet.getAddress());case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getPublicKey",value:function(){var t=Object(s.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.sensilet.getPublicKey());case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getNetwork",value:function(){var t=Object(s.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sensilet.getAddress();case 2:return n=t.sent,r=new p.bsv.Address.fromString(n),t.abrupt("return","testnet"===r.network.name?f.a.Testnet:f.a.Mainnet);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),r}(l.b);function h(t,e){var n=p.bsv.Script.fromHex(t).toASM().split(" ")[2];return new p.bsv.Address.fromHex("".concat(e===f.a.Testnet?"6f":"00").concat(n)).toString()}b.DEBUG_TAG="Sensilet"}).call(this,n(0).Buffer)},200:function(t,e,n){},202:function(t,e,n){},212:function(t,e){},218:function(t,e){},219:function(t,e){},23:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return p}));var r,a=n(2),s=n.n(a),c=n(7),i=n(18),u=n(28),o=n(62),l=n.n(o);!function(t){t.Testnet="testnet",t.Regtest="regtest",t.Mainnet="mainnet",t.STN="STN"}(r||(r={}));var p=function(){function t(){Object(i.a)(this,t)}return Object(u.a)(t,null,[{key:"setNetwork",value:function(e){t.API_PREFIX="https://api.whatsonchain.com/v1/bsv/".concat(e===r.Testnet?"test":"main"),t.TX_URL_PREFIX="".concat(e===r.Testnet?"https://test.whatsonchain.com/tx":"https://whatsonchain.com/tx")}},{key:"sendRawTransaction",value:function(){var e=Object(c.a)(s.a.mark((function e(n){var r,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Math.max(1,n.length/2/1024),a=Math.max(1e4,1e3*r),e.prev=2,e.next=5,l.a.post("".concat(t.API_PREFIX,"/tx/raw"),{txhex:n},{timeout:a});case 5:return c=e.sent,e.abrupt("return",c.data);case 9:throw e.prev=9,e.t0=e.catch(2),new Error("sendRawTransaction error: ");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"listUnspent",value:function(){var e=Object(c.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.a.get("".concat(t.API_PREFIX,"/address/").concat(n,"/unspent"),{timeout:1e4}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTxUri",value:function(e){return"".concat(t.TX_URL_PREFIX,"/").concat(e)}}]),t}();p.API_PREFIX="",p.TX_URL_PREFIX=""},240:function(t,e){},242:function(t,e){},253:function(t,e){},255:function(t,e){},282:function(t,e){},284:function(t,e){},289:function(t,e){},291:function(t,e){},303:function(t,e){},306:function(t,e){},378:function(t,e,n){"use strict";n.r(e);var r=n(10),a=n.n(r),s=n(195),c=n.n(s),i=(n(200),n(2)),u=n.n(i),o=n(35),l=n(7),p=(n(202),n(18)),f=n(28),b=n(48),h=n(47),d=n(4),v=n(46),w=n(62),j=n.n(w),x=function(){function t(){Object(p.a)(this,t)}return Object(f.a)(t,null,[{key:"setWallet",value:function(e){t.wallet=e}},{key:"version",value:function(){return"0.0.2"}},{key:"loadContract",value:function(t){return j.a.get(t,{timeout:1e4}).then((function(t){var e=Object(d.buildContractClass)(t.data);return{contractClass:e,types:Object(d.buildTypeClasses)(e)}}))}},{key:"getChangeAddress",value:function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.wallet.getRawChangeAddress());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"sendRawTx",value:function(){var e=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.wallet.sendRawTransaction(n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deploy",value:function(){var e=Object(l.a)(u.a.mark((function e(n,r){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.wallet,e.next=3,t.wallet.getRawChangeAddress();case 3:return s=e.sent,e.abrupt("return",a.listUnspent(r,{purpose:"tic-tac-toe"}).then((function(t){if(0===t.length)throw new Error("no utxo available");var e=new d.bsv.Transaction;return e.from([t[0]]).addOutput(new d.bsv.Transaction.Output({script:n.lockingScript,satoshis:r})).change(s),a.signRawTransaction(e.toString(),t[0].script,t[0].satoshis,0,v.a.ALL)})).then(function(){var e=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.sendRawTx(n);case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"call",value:function(){var e=Object(l.a)(u.a.mark((function e(n,r){var a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.wallet,(a=new d.bsv.Transaction).addInput(new d.bsv.Transaction.Input({prevTxId:n.txId,outputIndex:n.outputIndex,script:new d.bsv.Script,output:new d.bsv.Transaction.Output({script:n.script,satoshis:n.satoshis})})),r(a),s=a.toString(),e.next=7,t.sendRawTx(s);case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),t}();x.wallet=void 0;var g=n(194),O=n(23),m=n(1),y=function(t){var e=t.value?O.b.getTxUri(t.value.tx):"",n=t.value?Object(m.jsx)("div",{className:"squareicon",children:t.value.n}):"";return Object(m.jsxs)("div",{className:"squarewapper",children:[Object(m.jsx)("button",{className:"".concat(t.winnerClass," square"),onClick:t.onClick,children:t.value?Object(m.jsx)("a",{href:e,target:"_blank",title:"Click to see the transaction",children:t.value.label}):t.value}),n]})},k=function(t){Object(b.a)(n,t);var e=Object(h.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"createBoard",value:function(t,e){for(var n=[],r=0,a=0;a<t;a+=1){for(var s=[],c=0;c<e;c+=1)s.push(this.renderSquare(r++));n.push(Object(m.jsx)("div",{className:"board-row",children:s},a))}return n}},{key:"renderSquare",value:function(t){var e=this,n=!this.props.winnerSquares||this.props.winnerSquares[0]!==t&&this.props.winnerSquares[1]!==t&&this.props.winnerSquares[2]!==t?"":"square--green";return Object(m.jsx)(y,{winnerClass:n,value:this.props.squares[t],onClick:function(){return e.props.onClick(t)}},t)}},{key:"render",value:function(){return Object(m.jsx)("div",{children:this.createBoard(3,3)})}}]),n}(a.a.Component),N="alice",S="bob",A=function(t){return localStorage.getItem(t)},T=function(t,e){localStorage.setItem(t,e)},I=function(t){var e=A(t),n=new d.bsv.PrivateKey.fromWIF(e),r=d.bsv.PublicKey.fromPrivateKey(n);return Object(d.toHex)(r)},C=function(t){var e=A(t);return new d.bsv.PrivateKey.fromWIF(e).toAddress().toString()},E=function(){return localStorage.player||N},P=function(t){localStorage.setItem("player",t)},R={get:function(){var t=localStorage.game;return t?JSON.parse(t):{}},set:function(t){localStorage.setItem("game",JSON.stringify(t))},update:function(t){var e=R.get();localStorage.setItem("game",JSON.stringify(Object.assign(e,t)))},clear:function(){localStorage.setItem("game",JSON.stringify({}))}},_={add:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new d.bsv.Transaction(t),r=_.get(),a={utxo:{txId:n.id,outputIndex:e,satoshis:n.outputs[e].satoshis,script:n.outputs[e].script.toHex()},rawTx:t};return r.push(a),_.set(r),a},get:function(){var t=localStorage.utxos;return t?JSON.parse(t):[]},set:function(t){localStorage.setItem("utxos",JSON.stringify(t))},clear:function(){localStorage.setItem("utxos",JSON.stringify([]))},getlast:function(){var t=_.get();return t[t.length-1]},getdeploy:function(){return _.get()[0]}},q=function(t){var e=t.history.slice(0,t.currentStepNumber+1),n=e[e.length-1].squares.slice();if(t.currentStepNumber>0)return{isAliceTurn:t.isAliceTurn,board:n.map((function(t){return t&&"X"===t.label?1:t&&"O"===t.label?2:0}))}},L=function(t){for(var e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],n=0;n<e.length;n+=1){var r=Object(o.a)(e[n],3),a=r[0],s=r[1],c=r[2];if(t[a]&&t[s]&&t[c]&&t[a].label===t[s].label&&t[a].label===t[c].label)return{winner:t[a],winnerRow:e[n]}}return{winner:null,winnerRow:null}},B=function(t){return{0:"row: 1, col: 1",1:"row: 1, col: 2",2:"row: 1, col: 3",3:"row: 2, col: 1",4:"row: 2, col: 2",5:"row: 2, col: 3",6:"row: 3, col: 1",7:"row: 3, col: 2",8:"row: 3, col: 3"}[t]},F={history:[{squares:Array(9).fill(null)}],currentStepNumber:0,isAliceTurn:!0},U=function(t){Object(b.a)(n,t);var e=Object(h.a)(n);function n(t){var r;Object(p.a)(this,n),r=e.call(this,t);var a=R.get();return 0!==Object.keys(a).length?r.state=a:r.state=F,r.attachState(),r}return Object(f.a)(n,[{key:"clean",value:function(){this.setState(F)}},{key:"attachState",value:function(){var t=q(this.state);t&&this.props.contractInstance&&(this.props.contractInstance.isAliceTurn=t.isAliceTurn,this.props.contractInstance.board=t.board)}},{key:"canMove",value:function(t,e,n){var r=R.get();if(!r||0===Object.keys(r).length)return alert("Please start game first."),!1;if(L(n).winner||n[e])return!1;var a=E();return!(a!==N||!t)||(a===S&&!this.state.isAliceTurn||(alert("now is ".concat(this.state.isAliceTurn?"Alice":"Bob"," turn ")),!1))}},{key:"handleClick",value:function(t){var e=this,n=this.state.history.slice(0,this.state.currentStepNumber+1),r=n[n.length-1].squares.slice();if(this.canMove(this.state.isAliceTurn,t,r)){var a=Object.assign({},this.state);r[t]={label:this.state.isAliceTurn?"X":"O"};var s={history:n.concat([{squares:r,currentLocation:B(t),stepNumber:n.length}]),isAliceTurn:!this.state.isAliceTurn,currentStepNumber:n.length};this.setState(s);var c=_.getlast().utxo,i=L(r).winner;x.call(c,(function(r){if(i){var a=C(E());r.setOutput(0,(function(t){return new d.bsv.Transaction.Output({script:d.bsv.Script.buildPublicKeyHashOut(a),satoshis:c.satoshis-t.getEstimateFee()})}))}else if(n.length>=9)r.setOutput(0,(function(t){return new d.bsv.Transaction.Output({script:d.bsv.Script.buildPublicKeyHashOut(C(N)),satoshis:(c.satoshis-t.getEstimateFee())/2})})).setOutput(1,(function(t){return new d.bsv.Transaction.Output({script:d.bsv.Script.buildPublicKeyHashOut(C(S)),satoshis:(c.satoshis-t.getEstimateFee())/2})}));else{var u=q(s),o=e.props.contractInstance.getNewStateScript(u);r.setOutput(0,(function(t){var e=c.satoshis-t.getEstimateFee();return new d.bsv.Transaction.Output({script:o,satoshis:e})}))}r.setInputScript(0,(function(n,r){var a=Object(d.getPreimage)(n,r.script,r.satoshis),s=new d.bsv.PrivateKey.fromWIF(A(E())),i=Object(d.signTx)(n,s,r.script,r.satoshis),u=c.satoshis-n.getEstimateFee();if(u<1)throw alert("Not enough funds."),new Error("Not enough funds.");return e.props.contractInstance.move(t,i,u,a).toScript()})).seal()})).then((function(a){var s=_.add(a);r[t].tx=s.utxo.txId,r[t].n=n.length,i||P(e.state.isAliceTurn?N:S);var c=Object.assign({},e.state,{history:n.concat([{squares:r,currentLocation:B(t),stepNumber:n.length}])});e.setState(c),R.update(c),e.attachState()})).catch((function(t){e.setState(a),console.error("call contract fail",t)}))}else console.error("can not move now!")}},{key:"render",value:function(){var t,e,n,r,a=this,s=this.state.history,c=s[this.state.currentStepNumber],i=L(c.squares),u=i.winner,o=i.winnerRow,l=_.getdeploy(),p=_.getlast();if(n=E()===S?Object(m.jsxs)("div",{className:"bob",children:["Bob",Object(m.jsx)("img",{src:"/tic-tac-toe/bob.png"})]}):Object(m.jsxs)("div",{className:"alice",children:["Alice",Object(m.jsx)("img",{src:"/tic-tac-toe/alice.jpg"})]}),l&&(r=Object(m.jsxs)("div",{className:"bet",children:[Object(m.jsx)("a",{href:O.b.getTxUri(l.utxo.txId),target:"_blank",children:"Deploy transaction"})," "]})),u){var f="X"===u.label?"Alice":"Bob";t="Winner is ".concat(f),p&&(e=Object(m.jsxs)("div",{className:"end",children:[Object(m.jsx)("a",{href:O.b.getTxUri(l.utxo.txId),target:"_blank",children:"Withdraw transaction"})," "]}))}else if(10===s.length)t="Draw. No one won.",p&&(e=Object(m.jsxs)("div",{className:"end",children:[Object(m.jsx)("a",{href:O.b.getTxUri(l.utxo.txId),target:"_blank",children:"Withdraw transaction"})," "]}));else{var b=this.state.isAliceTurn?"Alice":"Bob";t="Next player: ".concat(b)}return Object(m.jsx)("div",{className:"game",children:Object(m.jsxs)("div",{className:"game-board",children:[Object(m.jsxs)("div",{className:"game-title",children:[n,Object(m.jsxs)("div",{className:"game-status",children:[" ",t," "]})]}),Object(m.jsx)(k,{squares:c.squares,winnerSquares:o,onClick:function(t){return a.handleClick(t)}}),Object(m.jsxs)("div",{className:"game-bottom",children:[r,e]})]})})}}]),n}(a.a.Component);var G=function(t){var e=Object(r.useRef)(null),n=function(){var n=Object(l.a)(u.a.mark((function n(r){var a,s;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!((a=parseInt(e.current.value))<5e4)){n.next=4;break}return alert("invalid amount, at least 50000 satoshis"),n.abrupt("return");case 4:if(isNaN(a)){n.next=15;break}if(!x.wallet){n.next=12;break}return n.next=8,x.wallet.getbalance();case 8:if(s=n.sent,!(a>s)){n.next=12;break}return alert("Not enough funds. Please fund your wallet address first"),n.abrupt("return");case 12:t.onStart(a),n.next=16;break;case 15:console.error("".concat(e.current.value," is not number"));case 16:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();return t.started?Object(m.jsxs)("div",{children:["The game is in progress ...",Object(m.jsx)("button",{className:"pure-button cancel",onClick:function(e){t.onCancel()},children:"Restart"})]}):Object(m.jsxs)("div",{children:[Object(m.jsxs)("label",{children:["Bet amount:",Object(m.jsx)("input",{ref:e,type:"number",name:"amount",min:"1",defaultValue:5e4,placeholder:"in satoshis"})]}),Object(m.jsx)("button",{className:"start",onClick:n,children:"Start"})]})},K=function(t){var e=Object(r.useState)(0),n=Object(o.a)(e,2),a=n[0],s=n[1],c=Object(r.useState)(""),i=Object(o.a)(c,2),p=i[0],f=i[1],b=Object(r.useState)(""),h=Object(o.a)(b,2),d=h[0],v=h[1];return Object(r.useEffect)(Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x.wallet&&(x.wallet.getbalance().then((function(t){s(t)})),x.wallet.getRawChangeAddress().then((function(t){f(t)})),x.wallet.getNetwork().then((function(t){t===O.a.Testnet?v("Testnet"):v("Mainnet")})));case 1:case"end":return t.stop()}}),t)}))),[]),Object(m.jsx)("div",{className:"wallet",children:Object(m.jsx)("div",{className:"walletInfo",children:Object(m.jsxs)("div",{className:"balance",children:[Object(m.jsxs)("label",{children:["Balance: ",a," ",Object(m.jsx)("span",{children:" (satoshis)"})]}),Object(m.jsx)("br",{}),Object(m.jsxs)("label",{children:["NetWork: ",d," "]}),Object(m.jsx)("br",{}),Object(m.jsxs)("label",{children:["Address: ",p," "]})]})})})},H=function(t){var e=function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.wallet.requestAccount("tic-tac-toe");case 3:t.sent&&window.location.reload(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("requestAccount error",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"auth",children:Object(m.jsx)("div",{children:Object(m.jsx)("button",{className:"pure-button button-large sensilet",onClick:e,children:"Sensilet"})})})};function X(t,e){return D.apply(this,arguments)}function D(){return(D=Object(l.a)(u.a.mark((function t(e,n){var r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.loadContract("/tic-tac-toe/tictactoe_release_desc.json");case 2:return r=t.sent,a=r.contractClass,t.abrupt("return",new a(new d.PubKey(e),new d.PubKey(n),!0,[0,0,0,0,0,0,0,0,0]));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Y=function(){var t=a.a.createRef(),e=Object(r.useState)({started:!1,isConnected:!1,instance:null}),n=Object(o.a)(e,2),s=n[0],c=n[1];Object(r.useEffect)(Object(l.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=setTimeout(Object(l.a)(u.a.mark((function t(){var e,n,r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X(I(N),I(S));case 2:return e=t.sent,n=new g.a,t.next=6,n.getNetwork();case 6:return r=t.sent,x.setWallet(new g.a(r)),t.next=10,x.wallet.isConnected();case 10:a=t.sent,c({started:Object.keys(R.get()).length>0,isConnected:a,instance:e});case 12:case"end":return t.stop()}}),t)}))),100),t.abrupt("return",(function(){clearTimeout(e)}));case 2:case"end":return t.stop()}}),t)}))),[]);var i=function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x.wallet&&s.instance&&x.deploy(s.instance,e).then((function(t){var n={amount:e,name:"tic-tac-toe",date:new Date,history:[{squares:Array(9).fill(null)}],currentStepNumber:0,isAliceTurn:!0};_.add(t),R.set(n),P(N),c(Object.assign({},s,{started:!0}))})).catch((function(t){alert(t.message),console.error(t)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R.clear(),_.clear(),P(N),s.instance&&(s.instance.isAliceTurn=!0,s.instance.board=[0,0,0,0,0,0,0,0,0]),t.current.clean(),c({started:!1,isConnected:s.isConnected,instance:s.instance});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)("header",{className:"App-header",children:[Object(m.jsx)("h2",{children:"Play Tic-Tac-Toe on Bitcoin"}),Object(m.jsx)(G,{onStart:i,onCancel:p,started:s.started}),Object(m.jsx)(U,{ref:t,contractInstance:s.instance}),s.isConnected?Object(m.jsx)(K,{}):Object(m.jsx)(H,{})]})})},W=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,379)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,s=e.getLCP,c=e.getTTFB;n(t),r(t),a(t),s(t),c(t)}))};!function(){if(!A(N)){var t=new d.bsv.PrivateKey.fromRandom;T(N,t.toWIF())}if(!A(S)){var e=new d.bsv.PrivateKey.fromRandom;T(S,e.toWIF())}}(),c.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(Y,{})}),document.getElementById("root")),W()},46:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c}));var r,a=n(18),s=n(23);!function(t){t[t.ALL=65]="ALL",t[t.SINGLE=67]="SINGLE",t[t.NONE=66]="NONE",t[t.ANYONECANPAY_ALL=193]="ANYONECANPAY_ALL",t[t.ANYONECANPAY_SINGLE=195]="ANYONECANPAY_SINGLE",t[t.ANYONECANPAY_NONE=194]="ANYONECANPAY_NONE"}(r||(r={}));var c=function t(e){Object(a.a)(this,t),this.network=void 0,this.network=e,s.b.setNetwork(this.network)}}},[[378,1,2]]]);
//# sourceMappingURL=main.45a209be.chunk.js.map